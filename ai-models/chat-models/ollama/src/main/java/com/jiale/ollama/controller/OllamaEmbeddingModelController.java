package com.jiale.ollama.controller;

import cn.hutool.json.JSONUtil;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.ai.embedding.EmbeddingOptions;
import org.springframework.ai.embedding.EmbeddingOptionsBuilder;
import org.springframework.ai.embedding.EmbeddingRequest;
import org.springframework.ai.embedding.EmbeddingResponse;
import org.springframework.ai.ollama.OllamaEmbeddingModel;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.ArrayList;
import java.util.List;

@Slf4j
@RestController
@RequiredArgsConstructor
@RequestMapping("/ollama/embeddingModel")
public class OllamaEmbeddingModelController {

    private final OllamaEmbeddingModel ollamaEmbeddingModel;

    /**
     * 调用 Ollama 的文本嵌入(Embedding)服务，将文本转换为向量表示。
     * 封装了与 Ollama 嵌入服务的交互细节，提供了标准化的接口和监控能力。
     * 输出结果：
     * 一批文本嵌入向量
     * List<String> inputs  -->  List<Embedding> embeddings
     * {"index":0,"metadata":{"modalityType":"TEXT","documentId":"","mimeType":{"type":"text","subtype":"plain","parameters":{}}}}
     * {"index":1,"metadata":{"modalityType":"TEXT","documentId":"","mimeType":{"type":"text","subtype":"plain","parameters":{}}}}
     */
    @RequestMapping("/call")
    public EmbeddingResponse call() {
        EmbeddingOptions embeddingOptions = EmbeddingOptionsBuilder.builder().withModel("nomic-embed-text").build();
        List<String> inputs = new ArrayList<>();
        inputs.add("近日，国务院公布了2025年劳动节假期安排，与往年相比，这次调整呈现出三大亮点：法定假日增加、调休更灵活、高速免费时间延长。这些变化不仅让上班族感到欣喜，也为老年朋友们的家庭团聚、短途旅行提供了更多便利。");
        inputs.add("加强农村基层干部廉洁履行职责工作，必须坚持以习近平新时代中国特色社会主义思想为指导，坚持和加强党的全面领导，完善农村权力运行监督机制，推动全面从严治党向基层延伸、向群众身边延伸，为推进乡村全面振兴提供坚强保障。");
        EmbeddingRequest request = new EmbeddingRequest(inputs, embeddingOptions);
        EmbeddingResponse response = ollamaEmbeddingModel.call(request);
        log.info(JSONUtil.toJsonStr(response));
        return response;
    }

    /**
     * 将一批文本嵌入向量中。
     * Embeds a batch of texts into vectors.
     * 输出结果：
     * [[-0.028399263,0.03250729,0.023758644,0.03297185,-0.03013013,0.009322496,0.024043381,0.013986734,0.045209225,0.059422996,0.04605277,-0.02269544,0.011276766,-0.020042863,-0.023914106,-0.047562428,0.0019509154,0.019095771,-0.019677982,0.07713268,0.012895701,0.022823805,-0.05742198,-0.0240676,-0.019092655,0.04290506,-0.012303473,0.011513196,0.034062665,0.030453399,-0.031199638,-0.0136167705,-0.029972263,-0.023159403,-0.028685605,0.012597909,0.033628497,0.015866537,0.03674997,-0.028061846,-0.003919854,-0.010277151,0.06797581,-0.04571089,-0.017630352,-0.02749835,-0.0048132995,-0.042262,-0.0038087973,-0.04040749,-0.013438389,0.03661184,0.048864346,-0.01512481,0.012142482,-0.014359422,-0.029751515,0.0108041605,0.011544933,0.053380873,0.015787078,0.017301382,0.012158959,-0.027017348,0.01799326,0.016536258,0.01233373,0.030886268,0.023763824,-0.0106593715,-0.034821987,0.007807418,-0.025378723,0.017388752,-0.011028634,0.0030470984,-0.012444628,6.159891E-4,-0.018345997,0.004648399,-0.043022342,-0.0048376517,-0.014208944,-0.032204222,-0.014908757,5.0696684E-4,-0.013646906,0.029203804,-0.009603758,-0.007798837,-0.033410802,0.048283637,-0.0289686,-0.03065161,0.006537798,0.009863712,-0.011305732,0.017190833,-0.016456062,-0.023652496,0.0047840225,0.010175506,-0.0074072923,0.047805972,-0.022052426,0.0016048827,-0.030337026,-0.0020108551,0.011515303,-0.042744886,-0.0033637478,-0.016406348,0.012728669,-0.016675059,0.046333265,0.06096017,0.0090432055,0.020167887,-0.013511068,-0.004469266,0.028231846,0.006316552,-0.013006946,-0.025026437,-0.029124191,-0.013791649,0.030875027,0.055621687,-0.035498295,-0.011882738,0.004664094,0.0121847205,0.0059498604,-0.0024546245,0.01448258,0.0552664,0.005207035,0.02400526,0.025063008,-0.021286007,0.037279967,0.01820305,-0.008164538,0.07463272,-0.019498995,0.0482703,-0.03636738,0.012799338,0.0046482272,0.027629983,-0.038910776,-0.0020125296,-6.1851245E-4,0.028597442,-0.017813338,-0.019108448,-0.025591746,0.0010353331,-0.016134981,0.013074393,-0.0054548597,-0.008253909,-0.035654116,-0.002114634,0.006665495,0.022859968,-0.0128331315,0.0014785228,-0.019840978,-0.04216035,0.031356588,0.029528664,-0.04966472,-0.007540277,0.043187622,0.04237859,0.029109417,0.02483154,0.008943259,0.021273552,-0.021059401,-0.024160042,-0.003875964,0.036079105,0.06554819,0.022342175,0.005343273,-0.032703657,0.043309517,-0.049816307,-0.010658947,0.028839946,-0.008075936,0.046613142,-0.03716056,-0.0040586735,-0.033698574,0.009556991,0.036374796,-0.032441936,-0.051541682,0.030638486,0.0031702763,0.04080141,0.009806521,-0.024871197,0.0020105557,0.06308012,-0.012463751,0.03416523,0.020981306,0.012553281,2.7820165E-4,-0.028449064,0.06810888,0.01739119,-0.03166988,0.04861357,-0.01910601,0.003114287,0.031980917,0.029540231,0.036310192,0.008574886,0.005456946,-0.004879326,0.005352422,0.04146163,0.03016718,0.009518466,0.03003418,0.0035866664,-0.0051817195,0.060599722,0.039080508,-0.007437329,0.015521138,0.035830013,0.007577936,0.009009576,-0.0079822615,-0.0024547323,0.056813467,0.037643563,-0.04177938,0.054340888,0.016880883,-0.025194276,0.019754175,-0.01600501,0.025114657,0.0037553762,0.039149296,0.059026394,0.0073893433,0.033491865,0.04638982,0.04759322,-0.010826033,-0.0545259,-0.0048719193,0.01697359,-0.016980976,-5.9264555E-4,0.010898548,0.0062187626,-0.035761673,-0.03017061,-0.017074034,0.0061737085,-0.03157464,0.013056776,-0.018479597,0.0037489955,-0.07976028,-0.007422923,0.031546544,-0.029552441,0.008762663,-0.0260302,-0.009202488,-0.030917684,-0.014767539,0.03234858,0.002560765,0.024564542,-0.020350741,0.023329215,0.016884176,0.040316932,-0.04380143,0.011848396,-0.019805124,0.046999946,-0.013712501,0.0024741634,-0.009870379,0.04644945,-0.015389521,-0.017689262,-3.677311E-4,0.0035858857,-0.00498656,-0.02312322,0.015470619,0.048059754,-0.025038233,-0.0013838102,0.01933393,0.04269888,-0.046034887,0.037939906,0.042567812,0.013056435,-0.060492266,0.0050583677,0.010568532,-0.006213143,-0.0034904932,-0.056161728,-0.027419835,-0.040406927,0.025260517,0.026106326,0.007641234,-0.052800838,0.06325266,-0.03772449,0.038761493,-0.052448004,-0.0455869,-0.07649695,-0.004978693,0.01064099,0.007594836,-0.024765361,-0.0073104594,-0.04112014,-0.026405128,-0.018742273,0.059988506,0.0038668055,0.034699604,0.06741396,-0.04042513,0.03655931,0.024566514,0.0039520003,-0.016700678,-0.004254659,-0.035969697,-0.006123962,-0.00966364,-0.004467293,-0.033628598,0.058098916,0.010235902,-0.0112045575,0.0021282646,-0.030636942,0.0658837,0.018534388,0.013150737,-0.017908825,-0.003195097,-0.040859945,0.0037395344,0.025402715,0.044050626,-0.052925106,0.030317679,0.022573614,-0.022433845,0.0060236813,-0.021141903,-0.03789893,0.043939833,0.01143895,0.008197163,-0.03700587,0.023751989,-0.046834894,0.025151484,0.022708446,0.0055473237,0.018580219,-0.007560575,0.012770624,-0.0027564694,-0.018436946,0.009271392,-0.039681945,-0.010095658,-0.022302905,-0.035089582,-0.08160288,-6.8482565E-5,0.02455643,0.012885268,-0.016841281,0.014181959,0.012459136,0.025901577,-6.4001064E-4,0.01811873,0.020561902,-0.032652732,0.07631015,-0.001922013,0.033613775,-0.011341965,-0.010395348,-0.002814286,0.006237511,0.020693883,0.007665396,-0.013524012,-0.003501695,-0.0070669395,-0.012957416,-0.0061102365,-0.0010195894,-0.030403858,0.021374272,0.027535772,-0.025694216,0.018419867,-0.036087528,0.04306755,0.053469326,-0.013272504,-0.027408296,0.0057675783,0.0020478696,-0.0287529,0.010507123,0.029587384,-0.019005284,-0.0051677073,-0.030269058,8.107918E-4,0.046018396,0.015306236,0.008336397,-0.0016168765,-9.29994E-4,0.033784665,0.0023140742,0.0021528623,-0.038724314,0.07186919,-0.010701974,0.06431252,-0.039982174,-0.011368642,0.013535701,-0.009912478,0.029985065,0.05978321,-0.010588797,-0.0149309505,-0.0047166613,-0.016361939,-0.026822668,2.808425E-4,0.032965843,-0.024607878,0.0034169643,0.024640445,-0.002257393,-0.022896439,-0.009868001,0.045825377,-0.039384343,0.012695574,-0.03663526,0.025833707,-9.153805E-5,-0.011172142,-0.0085215075,-0.01486222,0.031601515,0.013776048,-0.0050873845,0.022682142,-0.065389626,0.030333214,0.031881914,-0.033684436,0.04795243,-0.03374176,-0.031721067,-0.012638287,-0.04051978,-0.026478559,-0.0061588744,-0.035948522,-0.025269555,-0.01643689,-0.017584145,0.031695683,-0.023722181,-0.03424728,0.03486793,-0.02324725,-0.014330541,-0.06256057,0.0040145307,0.015787687,0.025260063,-0.033187233,-0.015276112,0.009251901,5.7629346E-5,0.04397854,0.03453657,0.016614439,-0.023543501,-0.034890864,0.03124489,0.06514627,-0.0435533,-0.0633419,0.03245152,-0.008547025,0.02688654,-0.02435076,0.025854703,-0.027499437,-0.0668528,-0.037636474,-0.04377734,-0.014632188,-0.054144908,-0.009961128,-0.012732791,0.027046893,0.007971817,-0.005850433,-0.030699689,-0.05189767,0.012649427,-0.080204494,-0.021857252,-0.05145589,-0.0929983,-0.017026141,0.02957207,0.022185132,0.013204734,-0.0018324354,0.0071502486,-0.010966006,0.029971007,-0.037877142,-0.017173236,0.046818886,0.05687014,-0.022404345,-0.018212933,-0.048156377,0.056958247,-0.018591315,-0.023920517,-0.03635478,0.0070166187,-0.03188443,0.018184217,0.051904615,-0.02732883,0.0050203777,-0.0073989383,0.05227379,0.034414057,0.027129795,-0.049518414,-0.08707872,-0.048130587,-0.05316602,0.017178737,0.002471821,-0.010074706,-0.004536001,-0.01782516,0.010897578,0.033217218,0.04214739,0.083419316,0.007534773,0.010153029,-0.019726088,0.025859559,0.0037280694,-0.015979273,-0.041458208,-0.004478212,-0.010004863,-0.0014878758,-0.021395624,-0.08623831,-0.07963679,-0.01958427,0.013887151,-0.020286605,0.03933946,-0.011764438,-0.01819689,-0.045143686,0.080284834,0.019008141,0.0068024397,0.070292436,0.011293346,0.016809879,0.06540054,0.013797903,0.009268124,-0.016428582,0.060088895,0.013977133,-0.077911355,-0.0010834142,0.055491358,-0.03972218,-0.05501648,-0.0081071425,-0.0027026525,0.001360914,-0.04538189,0.016429177,-0.01170819,-0.025814995,-3.902647E-4,0.04058886,0.03453837,-0.0054602767,-0.0065139895,-0.010860545,0.010448507,-0.04898242,0.054548204,0.0046162745,0.002920947,-0.07612832,-0.009787663,0.006871751,0.011035368,0.0739441,0.011358527,0.0032967601,0.018952414,-0.028577892,0.04563603,-0.043765504,-0.0011467998,0.02764853,0.0068599866,-0.041300416,-0.014573266,-0.015863784,-0.007487504,0.009478126,0.0077944435,0.0154151935,0.02401843,-0.0015122379,-0.020903796,-0.035314154,-0.02564339,-0.04644444,6.010944E-5,-0.039890375,0.014872568,-0.004973894,0.04827125,0.07242985,-0.06534534,-0.020058854,0.07491832,0.014681078,0.021989634,-0.03803068,-0.008600924,-0.05432238,-0.038401067,-0.019356627,-8.291529E-4,-0.047610518,0.037515696,0.048671585,-0.008073244,-0.02096105,0.021848453,0.01597995,-0.07401789,0.016221981,-0.0078646075,0.008239804,0.01593197,0.045531668,0.014721248,0.054780755,0.029541427,-5.580563E-4,-0.070370555,0.0031961263,-0.029203525,0.0020834112,0.020015167,-0.017409964,-0.045390833,-0.06170103,-0.0041757,-0.03945903,-0.003387073,-0.032675687,0.020910587,-0.009155927,-0.0030492889,0.012664819,0.03462747,-0.022699082,0.0059550954,-0.0043920786,0.038332522,0.016395248,-0.030261368,0.0016867149,-0.009120443,0.056710023,-0.011703542,0.011075139,0.017739093,-0.028423771,0.013095472,-0.044551104,-0.024966095,-0.046370342,-0.014480294,0.008620361,0.028941171,0.012050565,-0.008032123,0.005224078,0.0049918336,-0.015957836,0.003809155,-0.026947806,-0.070680454,0.03209038,-0.03188676,-0.04165065,0.027641604,-0.020780165,0.033547282,0.001024245,-0.0048642894,-0.010615722,0.009792614,0.02064325,0.051337037,-0.00908809,-0.0093777515,0.027961008,0.03843357,-0.012229333,-0.077663824,0.051371876,-0.054299705,-0.009115553,-0.008777155,0.006406357,0.025695805,0.00222779,0.006272046,-0.006186486,0.013910625,-0.040007625,-0.0065245023,0.015104201,0.018463923,-0.04481172,0.02896699,-0.025614534,-0.050413493,-0.054444,-0.01709455,0.022993539,-0.014524599,0.04132728,0.027180852,-0.0022560395,0.004873635,-0.021882268,-0.019069606,0.014026545,0.04566067,0.04118852,0.003628506,-0.009785836,0.027331334,-0.0043122848,-0.028392999,0.054031644,-0.013035707,0.0035672958,0.004749636,-0.0012029975,0.019662518,-0.022553675,-0.0299781,-0.012935506,-0.033694007,-0.0044736457,0.003033246,-0.054267727,0.013484293,-0.027563026,0.011113861,-0.033195745,-0.030213965,0.017555658,-0.021214088,0.022819495,-0.014825757,0.061445247,0.042871647,0.041305643,0.049921263,-0.0017195311,0.043527722,-0.026638387,-0.008080873,-0.026980042,-3.2387354E-4,0.0016543317,-0.02020981,-0.0055775587,0.033886027,-0.017757721,-4.0704818E-4,0.02996664,-0.036101554,0.0029670305,-0.023075992,0.016110634,-0.033207,-0.033085667,0.029720219,0.0018719719,-0.014982559,0.050446372,-0.02869525,-0.010755013,0.023719026,0.06340967,-0.0020380432,0.041740138,0.032114103,-0.051995054,-0.03802638,-0.022611333,0.0013302988,5.6571845E-4,0.013520045,-0.039283555,-0.006863613,-0.005640377,-0.018523721,0.04026102,0.014314526,-0.035099976,-0.031082284,0.004233563,-0.014822237,-0.0018297988,0.017502742,0.026935315,0.016839463,-0.01294849,0.0330895,0.019753208,-0.008839323,-0.022631347,-0.07683163,0.02766755,-0.0107800355,-0.032787852,-0.039034907,-0.018592827,-0.020971233,0.029075658,-0.012552712,-0.070313424,0.022941846,0.038901005,0.00791867,0.017668879,-0.054182258,-0.018802742,0.0031817975,0.022210471,0.0179002,0.023020066,-0.0052519715,0.0356067,0.02297954,0.007461074,-0.014991514,-0.016820827,0.01696596,0.008627205,-0.048887666,-0.012347858,-0.0543372,0.020161798,0.054210573,-0.029304473,-0.012254398,-0.02422209,0.008233675,-0.055214476,0.014884971,-0.038706552,0.049461648,-0.045044277,0.004999219,0.029270325,-0.05289506,0.21553981,0.03843462,0.014774745,-0.009043516,0.023294363,0.018667787,-0.0061928825,-0.03680001,0.012735452,-0.010152265,0.003813287,-0.025187211,-0.00292179,0.023443462,-0.022636123,0.048184022,-0.039603688,0.038841654,0.024128072,-0.03837006,-0.05700469,0.019843489,0.028218718,0.02131619,0.008834998,0.03747646,0.008634992,0.0079560205,-0.038110916,-0.024749532,0.029735021,-0.0720305,-0.013241679,0.008201498,-0.05878055,-0.015003836,0.0014292224,-0.019138983,0.018464763,0.016934752,0.046265908,0.02547114,-0.004827772,-1.6149944E-4,0.028646436,0.016855784,-0.0259789,0.015139098,0.020839699,-0.053870793,0.03738671,-0.0046049412,0.04772432,0.0014261798,-0.041406743,-0.006489685,-0.001043077,-0.014810054,0.0018551768,0.036803782,0.007121791,0.025344858,-0.06345055,0.020626362,-0.059683368,0.0066557936,0.008528297,0.016502673,-0.01063278,0.009311953,0.025016282,-0.021879774,-0.0070607853,0.005525633,0.0068795984,0.014188401,-0.04180674,-0.009932869,-0.018258948,-0.018836057,0.0081517,-0.021744158,-0.004856484,-0.040821522,0.0064277877,0.026163517,-0.014292155,-0.010920508,-0.013709196,0.060397163,0.008596907,0.045029018,-0.061218493,-0.0695147,-0.035605017],[-0.032145116,0.0066054747,-0.0064178626,0.020957435,-0.032054137,-0.020835614,-0.003296572,0.011738929,0.045565885,0.05431319,0.041333817,0.027748777,0.03251248,-0.011509156,-0.04798838,-0.011854211,-0.007764778,0.00582277,-0.029377814,0.05800799,0.0029208043,-0.0040246383,-0.059426103,-0.040029623,-0.0401752,0.010474218,-0.0038527634,-0.011501628,0.027010607,0.018674819,-0.022668066,0.0056216577,0.0029367015,-0.04078883,-0.010930959,-8.844396E-4,0.014014351,-0.026937207,-0.003411953,-0.05302877,-0.025682071,-0.03804236,0.05706528,-0.04865628,-0.024288325,-0.020990446,0.0011902498,-0.030708972,0.035430677,-0.058718756,0.0042745145,0.031576935,0.033584297,0.009157196,0.008623517,-0.015092076,-0.0033318943,-0.0102017755,0.007053114,0.016530316,0.0012488683,-0.020198913,-0.014001062,-0.036320675,0.024810335,0.050508544,0.016031383,0.02484274,0.032191053,-0.036115345,0.01477337,-0.0027856582,-0.021932198,-0.06966621,0.02498765,0.026979936,-0.015162818,-0.0047406727,-0.020130236,-0.026187971,-0.018656874,-0.018334521,0.033536088,-0.02692637,-0.049269505,1.1068542E-4,0.005684727,0.023122225,-0.010788358,0.016541872,0.02370477,0.03605396,0.05450881,0.0046624513,0.055296633,0.020812092,-0.008092416,0.027304946,-3.5604453E-4,-0.0044872686,0.019385844,0.05683786,0.002206538,0.036712445,0.007324236,0.0027102057,-0.02360469,0.035334285,0.0010853333,-0.03984102,-0.0065434813,-0.03063163,-0.0074352133,-0.030883053,0.04622854,0.031418826,0.007456739,0.00633262,0.0017547375,-0.0044870223,0.020991381,-0.015301767,0.006540703,-0.033338793,0.00435542,0.0323222,0.024541179,0.07216518,-0.026859887,-0.013528451,0.021325866,-0.032331195,-0.0041360417,-0.010239668,0.02779973,0.02002121,-0.0055021257,0.0058675534,0.05127387,-0.0025922328,0.009785852,0.018259339,0.005763829,0.063211285,-0.0036025646,0.07013687,-0.049028445,-0.025280833,-0.0047535086,0.00250806,-0.0066078138,0.022468904,0.0016439577,0.00266944,0.0056379857,-0.0030486928,-0.005597195,0.026891802,0.011837868,0.03294916,0.0061601163,0.008396628,0.004501697,0.01901751,-0.05168388,0.057329804,-0.035907596,0.0010453432,-0.03592334,-0.055573422,0.013569016,0.04138713,-0.031924304,-0.023097474,0.019425724,0.037329953,0.029640935,0.04165619,0.040153604,0.017510638,0.018539855,-0.023291701,-0.008470238,0.045953117,0.023834739,-0.00734159,-2.3237322E-4,-0.011018005,0.023693169,-0.020234907,0.015541827,0.04282653,-0.0039271913,0.024522025,7.0572493E-4,-0.029630385,-0.009847849,0.01128826,0.017987603,-0.030535804,-0.04567337,0.0075912345,-0.019103253,0.028945912,0.009301189,-0.049699206,0.004159168,0.03563337,-0.0023419042,-0.015380735,0.032981902,-0.0072067366,-1.5400833E-4,0.019871954,0.053317487,-0.0024415404,-0.021447554,-0.020408044,0.0043080417,-0.012715545,-0.014559695,0.0639931,0.023161905,0.015290949,-0.014449931,0.035629977,-0.001862926,0.016553765,0.03479716,-0.024735637,0.028219942,0.0033873285,8.853539E-4,0.10300292,0.009271089,-5.9137044E-5,-0.0066404534,0.021293035,0.01066958,0.0020522377,-0.006045145,0.013787363,0.03341338,0.01817671,-0.04244134,0.015134446,0.014372346,0.015012773,-0.037568178,0.008115424,-0.009298072,0.023315154,0.014818244,0.056271195,-0.018589776,0.0025740573,0.015260446,0.023185723,-0.027319035,-0.023460105,0.015425243,0.0230721,-0.005294404,0.041036855,0.04487675,-0.01606713,-0.013116434,-0.0016436717,-0.01692171,0.006403636,-0.03340565,0.047221545,-0.036879648,-0.028142791,-0.07274644,-0.009536506,0.044983696,-0.009490449,-0.0021581638,-0.022961283,-0.010681422,-0.008575053,-0.0053813118,-0.002648818,0.01092854,0.004747939,-0.046850104,0.007410982,-0.032694034,-0.016826887,-0.030471025,0.028002603,-0.02196937,0.008593518,-0.0047853203,0.011235637,0.014748172,0.018541131,0.011501806,-0.04718144,-0.022848057,-0.011016254,-0.019742824,-0.027335467,-0.008417976,0.031558536,-0.030789481,0.021442158,0.009269791,0.044550575,-0.018183358,0.057868153,0.033629075,-0.0010986573,-0.072944745,0.030434752,0.014325206,0.0034562207,-0.04407515,-0.023540514,-0.026602192,-0.031028658,0.027862241,0.0023046287,-0.0372652,-0.0053193355,0.07489273,-0.05924034,0.011737424,-0.036582872,-0.039513696,-0.058953837,-0.01700053,0.021692896,0.0125071155,0.019404542,-0.03575067,-0.03274639,-0.032743096,-0.01891962,0.045906197,0.0011230558,0.037616383,0.018382668,-0.030842725,0.015590124,-0.0030346545,-0.006505646,-0.043562133,-0.02741878,-0.03431203,-0.02340182,0.03214859,-0.005496647,-0.0067366594,0.07314418,-0.012786731,-0.012078833,-4.5524555E-4,0.00703491,0.023216574,0.04507003,0.006481859,-0.023615811,-0.014046754,-0.057833835,-0.005366514,-0.019497506,0.03786193,-0.0197076,0.03721701,-0.0081664575,-0.042734526,0.013825335,-0.019971618,-0.038951237,0.06220519,0.020553403,0.044781525,-0.01744388,-0.021913674,-0.015710313,0.045607902,0.018573165,0.003702139,0.036550697,-0.024436126,0.0063756425,0.021566382,-0.00966818,-0.011815036,-0.012495703,-0.0013908952,0.0028671038,-0.03917523,-0.07271686,0.047217082,0.010954487,0.041146174,-0.033227652,0.0079445,0.056360986,0.041513544,0.020588525,-0.017420908,0.042127825,-0.032005407,0.041168973,0.0053135687,0.06665564,-0.071749985,0.016698996,-0.03219658,0.02687216,0.021064319,0.019750636,-0.06732928,-0.0010506897,-0.015188924,0.025041973,0.013203848,-0.02950249,-0.011423821,0.008236003,0.07538616,-0.026960159,6.837297E-4,-0.034713585,0.023378031,0.017860616,-0.017827012,-0.036765207,0.018471392,-0.006558788,-0.0029148199,0.009517176,0.0031883027,-0.028713804,0.024880603,-0.03251822,-0.008467934,0.008871626,-0.0035318495,0.0062878802,-0.01950475,-0.0014412128,0.0065960465,0.032268353,0.012601066,-0.02880006,0.0067894,0.03111676,0.030486628,-0.019012209,0.010845469,0.024508318,-0.021977743,0.032669973,0.04811129,-0.013032163,-0.0177657,0.0015840066,-0.008311602,-0.015385637,0.016022405,0.017498257,-0.009251314,0.0011905228,0.011398157,0.0051080585,-0.046919607,0.015162683,0.04455104,-0.04615204,0.014968354,-0.058462437,0.02517261,-0.0016921542,0.010851605,0.017669616,-0.028835453,0.049424008,0.009811082,4.1470496E-4,-0.04458203,-0.033425283,1.490684E-6,0.027448598,0.006868741,0.08203147,-0.016798405,-0.042830344,0.028460326,-0.033267155,0.023020312,0.010879776,-0.014565604,-0.017104642,0.0123937,-0.0052225366,0.04366481,-0.0049193646,-0.051657725,-0.018746853,-0.03891123,0.014063554,-0.043566834,-0.0011242502,0.038653016,0.06892818,-0.016008032,-0.010173502,-0.046777043,-0.002371378,0.0063343556,0.04593201,0.019057384,-0.05160997,-0.022950286,0.02420549,0.039508212,-0.0708811,-0.030848555,-0.008733608,0.012601372,0.04070654,0.0072556757,0.055131216,-0.04649783,-0.03429415,-0.0044598565,-0.031602837,-0.0096645085,-0.06464807,-0.0300977,-0.022902504,0.010483007,0.037567735,-0.01475904,-0.053096548,-0.019466208,0.014708427,-0.051535588,-0.03332713,-0.05380318,-0.0703836,-0.014803462,0.047334626,0.0086410055,-0.013870639,0.0018703478,0.034827314,4.2473004E-4,0.021184098,-0.009945666,-0.023050912,-0.008293079,0.03486396,-0.029868651,0.010804068,-0.10392059,-0.0073971376,-0.020559508,0.01249127,-0.037229396,7.228575E-4,0.0038792663,0.00967355,0.02518651,-0.018197829,0.023350038,-0.030978743,0.050899394,0.02606041,0.01816214,-0.05965527,-0.057104945,-0.06984637,-0.003301074,0.024996711,0.012403886,-0.012173199,0.024180293,0.017190468,-3.6171186E-5,0.0024451166,0.023625834,0.07573549,-0.02270371,-0.0019482573,-0.042311154,0.034724746,-0.014642126,-7.616478E-4,-0.020959511,0.006461133,-0.034233313,0.005659038,-0.050470475,-0.07539585,-0.07251507,-0.02145788,0.015868036,-0.045916777,0.060891803,-0.012714579,-7.579824E-4,-0.02619873,0.039342526,0.006214921,-0.009336842,0.04527742,0.026029717,0.013181404,0.056832448,0.0061664954,0.03405228,0.0011282274,0.0122225005,0.028105088,-0.05725703,0.010699437,0.06536817,-0.063798055,-0.057091314,-0.04732324,6.4414686E-5,0.042987335,-0.04745292,0.027061747,0.023729438,-0.03299771,0.03637931,0.051492568,0.027199142,0.028213186,-0.001206489,-0.0050865975,-0.027253892,-0.025137048,0.04316419,0.01617114,-0.02873793,-0.029127387,-0.03241675,-0.00512322,0.0363132,0.050821047,0.029441671,-0.009926161,-0.0044322102,-0.0140093295,0.03895015,-0.0034061838,0.019705784,0.0048751207,-0.015070499,-0.066687144,-0.0022723456,-0.020154694,0.01636797,0.022215363,-0.020945951,0.017544454,0.019607212,-0.0017948878,0.0075293975,-0.0550416,0.0079952935,-0.072222665,0.020985696,-0.029250149,-0.018047463,0.018332824,-0.00534798,0.012840904,-0.038333613,-0.035233263,0.05967217,-0.03238362,0.018748712,-0.041603792,-0.02868138,-0.060563173,-0.05615695,-0.04779006,0.018662963,0.006904494,0.0073496876,0.020157404,0.0039805453,0.014785574,0.0014024151,0.028017294,-0.07493232,0.0058272667,-0.010270398,0.010747827,0.046734598,0.034941494,0.012741624,0.047832564,-0.011736351,0.024864545,-0.0113960765,-0.028293127,-0.024262281,0.0016723387,-0.030540248,-0.035564344,-0.07646835,-0.0669535,9.4387744E-4,-0.008205083,-0.024632573,-0.010604652,0.0032072244,0.007851956,0.010896548,0.025272956,0.015159417,-0.07483924,-0.0011979415,-0.010449022,0.042131335,-0.012941182,0.0051192762,0.012108527,-0.013776473,0.026379375,0.009358765,-0.0050801877,0.03239155,2.981261E-4,0.03648294,-0.0404549,-0.041994456,0.021400537,-0.009882579,-0.0030097896,0.048451222,-0.044340257,-0.017845755,0.038903054,-0.002543985,0.007871621,0.0056329896,-0.0374591,-0.05845044,0.020538216,-0.011055233,-0.038595933,-0.004041826,-0.025811419,0.047538027,0.0060800957,-0.012309494,0.0027075815,-0.023170596,0.038577504,0.042333875,-0.012627354,0.0054581645,0.03332629,0.028331244,0.0032889193,-0.06387646,0.03172099,-0.01563886,-0.01430929,-0.022440262,0.020086214,0.017802868,-0.03453331,0.0037222449,-0.013116232,0.018737622,-0.048434425,-0.02199423,0.021157213,0.021279685,-0.03080378,0.042245068,-0.016707066,-0.04267973,-0.0420811,0.0075485012,-0.004548676,0.004342872,0.016766846,0.012870583,0.012336052,-0.013630218,-0.0104900645,5.815016E-4,0.033654034,0.061163254,0.024779383,-0.006745102,0.0049231695,0.040624384,0.03750656,-0.055394337,0.03537785,0.004239688,-0.002867727,0.012197278,0.00782194,0.002024255,0.009609536,0.027606107,0.0039295587,0.0025386342,0.008430831,-0.00869859,-0.03982073,0.031744983,-0.0053293332,-0.013657722,0.0040102643,-0.045554116,0.013581126,0.03146355,0.008794149,0.015678188,0.035619214,0.0361697,-0.01575791,0.045940433,0.014003934,0.046820987,-0.019099133,-0.0068046255,0.0018774603,-0.015342835,-0.03800468,-0.004419164,0.027442807,-0.0052301,0.001433006,-0.011466263,0.032547135,-0.006371526,-0.0041910796,-0.053699907,0.0016395737,-0.055260945,-0.057867564,0.0626899,0.032059517,0.030970871,0.024664631,0.02129349,-0.011722295,0.02559404,0.074099764,0.028977368,0.028653387,0.028277729,-0.039789457,-0.01015148,-0.017072815,-0.013897108,-0.014642033,7.5014774E-4,-0.03268438,0.010978023,-0.042877242,-0.055670414,0.052302238,0.022432843,-0.0026498598,-0.04931026,-0.002945691,0.010806041,-0.00513613,-0.02568033,0.06380671,0.02650956,-0.012853425,-0.010701004,0.022737857,-0.0013249359,-0.01264604,-0.058499787,0.04789061,0.002480701,-0.022548415,-0.038607486,-0.037852947,-0.018071607,0.05596949,-0.03024968,-0.018405128,0.014579136,0.030152025,-0.0063201855,0.028488414,-0.05196385,0.001665239,0.028780796,0.034001753,0.017743822,0.025315847,0.01366842,0.04417737,0.028414479,9.201474E-4,0.007141728,-0.012543671,1.5274089E-4,-0.013738173,-0.024696432,-0.018844776,-0.080530494,-0.0054239663,0.046030115,-0.03712817,-0.030303786,-0.01941852,-0.031018054,-0.055534326,0.010713442,-0.04141294,0.015085562,-0.02356769,0.027215676,-0.0021899883,-0.039890572,0.21497096,0.0046808743,0.012580147,-0.0035166822,0.03694978,0.064956866,-0.01330024,-0.0057477225,0.017172333,-0.052874736,-0.027413985,0.014634246,-0.004094932,0.021273134,0.0011587896,0.046332955,-0.0522805,0.0501566,-0.0012675883,-0.042878654,-0.07874941,-1.7516804E-4,-0.009996806,0.04648632,-0.0123816915,0.0149413645,-0.025211675,-0.035617158,-0.029355183,-0.031960703,0.046989482,-0.033590104,0.009546333,0.009462879,-0.081061855,-0.012448356,-0.0048970035,2.5309756E-4,-0.0010075063,-0.011057752,0.009661394,0.061972875,0.025245605,-0.048427828,0.020674096,0.072237335,-0.03436627,0.024921741,0.023632837,-0.027322048,0.077570915,-0.016686277,0.0151493065,0.0050941054,-0.0562693,-0.023316162,0.010516246,-0.022362439,-0.012667432,0.048712112,0.003291226,0.009656192,-0.03060655,0.022723341,-0.03566811,-0.040149257,-7.7895477E-4,0.012018889,-0.029791677,0.030115668,0.021717828,-0.024226043,-0.001648535,-0.010944571,0.040205725,0.04213666,-0.034618974,-0.0139810275,-0.027044447,-0.020199798,0.013251832,-0.0050877105,-6.5095106E-4,0.018793492,-0.01675213,0.05210553,-0.0519148,-5.7102856E-4,0.026319155,0.03837638,0.026021758,0.022031635,-0.06442687,-0.042573087,-0.040660974]]
     */
    @RequestMapping("/embed")
    public String embed() {
        List<String> inputs = new ArrayList<>();
        inputs.add("近日，国务院公布了2025年劳动节假期安排，与往年相比，这次调整呈现出三大亮点：法定假日增加、调休更灵活、高速免费时间延长。这些变化不仅让上班族感到欣喜，也为老年朋友们的家庭团聚、短途旅行提供了更多便利。");
        inputs.add("加强农村基层干部廉洁履行职责工作，必须坚持以习近平新时代中国特色社会主义思想为指导，坚持和加强党的全面领导，完善农村权力运行监督机制，推动全面从严治党向基层延伸、向群众身边延伸，为推进乡村全面振兴提供坚强保障。");
        List<float[]> embed = ollamaEmbeddingModel.embed(inputs);
        log.info(JSONUtil.toJsonStr(embed));
        return "hello world";
    }

}
